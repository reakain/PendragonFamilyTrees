<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Gabriel of Bedegraine Family Tree</title>

  
  <script type="text/javascript" src="primitives.js"></script>
  <link href="css/primitives.css" media="screen" rel="stylesheet" type="text/css" />

  <script type='text/javascript'>
    var control;
    document.addEventListener('DOMContentLoaded', function () {
      var options = new primitives.FamConfig();

      var items = [
        { id: 1, name: "Ser Guy", parents: [], spouses: [2], crest: null, link: null },
        { id: 2, name: "Lady Lena", parents: [], spouses: [1], crest: null, link: null },
        { id: 3, name: "Lord Harvis", parents: [], spouses: [4], crest: null, link: null },
        { id: 4, name: "Ser Mera", parents: [], spouses: [3], crest: null, link: null },
        { id: 5, name: "Ser Thomas", parents: [1, 2], spouses: [10], crest: "images/heraldry_bedegraine_thomas.png", link: "https://pendragon-heritage.fandom.com/wiki/Thomas_of_Bedegraine" },
        { id: 6, name: "Father Gilbert", parents: [1, 2], spouses: [], crest: null, link: "https://pendragon-heritage.fandom.com/wiki/Father_Gilbert" },
        { id: 7, name: "Ser Siana", parents: [1, 2], spouses: [], crest: "images/heraldry_bedegraine_siana.png", link: "https://pendragon-heritage.fandom.com/wiki/Ser_Siana" },
        { id: 8, name: "Ser Davis", parents: [1, 2], spouses: [], crest: "images/heraldry_bedegraine_davis.png", link: "https://pendragon-heritage.fandom.com/wiki/Ser_Davis" },
        { id: 9, name: "Sister Annest", parents: [3, 4], spouses: [], crest: null, link: "https://pendragon-heritage.fandom.com/wiki/Sister_Annest" },
        { id: 10, name: "Lady Evelyn", parents: [3, 4], spouses: [5], crest: null, link: "https://pendragon-heritage.fandom.com/wiki/Evelyn_of_Bedegraine" },
        { id: 11, name: "Ser Elian", parents: [3, 4], spouses: [], crest: "images/heraldry_bedegraine_elian.png", link: "https://pendragon-heritage.fandom.com/wiki/Ser_Elian" },
        { id: 12, name: "Lady Iona", parents: [], spouses: [11], crest: null, link: null },
        { id: 13, name: "Lord Lot", parents: [], spouses: [11], crest: null, link: null },
        { id: 14, name: "Ser Gabriel", parents: [5, 10], spouses: [], crest: "images/heraldry_bedegraine_gabriel.png", link: "https://pendragon-heritage.fandom.com/wiki/Ser_Gabriel_of_Bedegraine" },
        { id: 15, name: "Ser Cein", parents: [7], spouses: [], crest: "images/heraldry_bedegraine_cein.png", link: "https://pendragon-heritage.fandom.com/wiki/Cein" },
        { id: 16, name: "Elan", parents: [11, 12], spouses: [], crest: null, link: null },
        { id: 17, name: "Efa", parents: [11, 12], spouses: [], crest: null, link: null },
        //{ id: , name: "", parents: [], spouses: [], crest: null, link: null },
        //{ id: , name: "", parents: [], spouses: [], crest: null, link: null },
        //{ id: , name: "", parents: [], spouses: [], crest: null, link: null },
        //{ id: , name: "", parents: [], spouses: [], crest: null, link: null },
        //{ id: , name: "", parents: [], spouses: [], crest: null, link: "https://pendragon-heritage.fandom.com/wiki/" }
      ];

      options.pageFitMode = primitives.PageFitMode.AutoSize;
      options.autoSizeMinimum = new primitives.Size(100, 100);
      options.autoSizeMaximum = new primitives.Size(2000, 2000);
      options.items = items;
      //options.cursorItem = 2;
      options.linesWidth = 1;
      options.linesColor = "black";
      options.hasSelectorCheckbox = primitives.Enabled.False;
      options.normalLevelShift = 20;
      options.dotLevelShift = 20;
      options.lineLevelShift = 20;
      options.normalItemsInterval = 10;
      options.dotItemsInterval = 10;
      options.lineItemsInterval = 10;
      //options.arrowsDirection = primitives.GroupByType.Parents;
      options.showExtraArrows = false;
      options.defaultTemplateName = "info";
      options.templates = [getInfoTemplate()];
      options.onItemRender = onTemplateRender;

      control = primitives.FamDiagram(document.getElementById("basicdiagram"), options);
    });

    function onTemplateRender(event, data) {
      switch (data.renderingMode) {
        case primitives.RenderingMode.Create:
          /* Initialize widgets here */
          break;
        case primitives.RenderingMode.Update:
          /* Update widgets here */
          break;
      }

      var itemConfig = data.context;

      if (data.templateName == "info") {
        var title = data.element.firstChild.firstChild;
        title.textContent = itemConfig.name;
        if(itemConfig.link != null){
          title.href = itemConfig.link;
        }
        var photo = data.element.childNodes[1].firstChild;
        if(itemConfig.crest != null){
        photo.src = itemConfig.crest;
        }
        else{photo.style.visibility = 'hidden'}
      }
    }

    function getInfoTemplate() {
      var result = new primitives.TemplateConfig();
      result.name = "info";

      result.itemSize = new primitives.Size(80, 100);
      result.minimizedItemSize = new primitives.Size(3, 3);
      result.highlightPadding = new primitives.Thickness(4, 4, 4, 4);

      result.itemTemplate =
      ["div",
					{
						"style": {
							"width": result.itemSize.width + "px",
							"height": result.itemSize.height + "px"
						},
						"class": ["bp-item", "bp-corner-all", "bt-item-frame"]
					},
                    ["div",
                        {
                            "name": "name",
                            "class": ["bp-item"],
                            "style": {
                                top: "3px",
                                left: "6px",
                                width: "68px",
                                height: "28px",
                                fontSize: "12px",
                                textAlign: "center"
                            }
                        },
                        ["a",
                            {
                                "class": ["bp-item"],
                                "style": {
                                    display: "block",
                                    height: "100%",
                                    textAlign: "center",
                                    fontColor: "black"
                                }
                            }
                        ]
                    ],
					["div",
						{
							"class": ["bp-item"],
							"style": {
								top: "31px",
								left: "8px",
								width: "60px",
                                height: "60px",
							}
						},
						["img",
							{
								"name": "crest",
								"class": ["bp-item"],
								"style": {
									width: "60px",
									height: "60px"
                                }
							}
						]
					],
					["div",
						{
							"name": "phone",
							"class": "bp-item",
							"style": {
								top: "26px",
								left: "56px",
								width: "162px",
								height: "18px",
								fontSize: "12px"
							}
						}
					],
					["div",
						{
							"name": "email",
							"class": "bp-item",
							"style": {
								top: "44px",
								left: "56px",
								width: "162px",
								height: "18px",
								fontSize: "12px"
							}
						}
					],
					["div",
						{
							"name": "description",
							"class": "bp-item",
							"style": {
								top: "62px",
								left: "56px",
								width: "162px",
								height: "36px",
								fontSize: "12px"
							}
						}
					]
				];
        //'<div class="bp-item bp-corner-all bt-item-frame" style="width:' + result.itemSize.width + 'px; height: ' + result.itemSize.height + 'px;">'
        //+ '<div name="title" class="bp-item" style="top: 3px; left: 6px; width: 68px; height: 28px; font-size: 12px;">'
        //+ '</div>'
        //+ '</div>';

      return result;
    }
  </script>
</head>

<body>
  <div id="basicdiagram" style="border-style: dotted; border-width: 1px;"></div>
</body>

</html>